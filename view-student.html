<!DOCTYPE html>
<html>
<head>
  <title>View Students</title>
</head>
<body>
  <h2>View Students</h2>
  <select id="classSelect"></select>
  <ul id="studentList"></ul>

  <script>
    const webAppUrl = "https://script.google.com/macros/s/AKfycbyNWTluHoK_rZD0bJXll7g0vZ3f6yr4bQbrRw5FmIeMDJSQyvO6cTcR6oVZK8e-yj1icA/exec";

    const classSelect = document.getElementById("classSelect");
    const studentList = document.getElementById("studentList");

    const classes = ["Class_1A", "Class_2B", "Class_3C"];
    classes.forEach(cls => {
      const opt = document.createElement("option");
      opt.value = cls;
      opt.text = cls;
      classSelect.appendChild(opt);
    });

    classSelect.addEventListener("change", loadStudents);

    function loadStudents() {
      const className = classSelect.value;
      fetch(`${webAppUrl}?action=getStudents&className=${className}`)
        .then(res => res.json())
        .then(data => {
          studentList.innerHTML = "";
          data.forEach(s => {
            const li = document.createElement("li");
            li.textContent = `${s.roll} - ${s.name}`;
            studentList.appendChild(li);
          });
        });
    }

    loadStudents();
  </script>
</body>
</html>
