<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mark Attendance</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>ðŸ“… Mark Attendance</h2>

  <label for="attendanceDate"><strong>Select Date:</strong></label><br>
  <input type="date" id="attendanceDate"><br><br>

  <form id="attendanceForm">
    <div id="studentList"></div>
    <button type="submit">âœ… Save Attendance</button>
  </form>

  <a href="index.html">â¬… Back to Home</a>

  <script src="script.js"></script>
  // Show students and handle attendance saving
document.addEventListener('DOMContentLoaded', () => {
  const studentList = document.getElementById('studentList');
  const attendanceForm = document.getElementById('attendanceForm');
  const attendanceDate = document.getElementById('attendanceDate');

  if (studentList && attendanceForm && attendanceDate) {
    const today = new Date().toISOString().split('T')[0];
    attendanceDate.value = today;

    const students = JSON.parse(localStorage.getItem('students') || '[]');
    if (students.length === 0) {
      studentList.innerHTML = "<p>No students found. Please add students first.</p>";
      attendanceForm.style.display = "none";
      return;
    }

    students.forEach((student, index) => {
      const div = document.createElement('div');
      div.className = "student-checkbox";
      div.innerHTML = `
        <label>
          <input type="checkbox" name="attendance" value="${student.roll}">
          ${student.name} (Roll: ${student.roll}, Class: ${student.class})
        </label>
      `;
      studentList.appendChild(div);
    });

    attendanceForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const date = attendanceDate.value;
      const checkboxes = document.querySelectorAll('input[name="attendance"]:checked');
      const presentRolls = Array.from(checkboxes).map(cb => cb.value);

      const allAttendance = JSON.parse(localStorage.getItem('attendance') || '{}');
      allAttendance[date] = presentRolls;

      localStorage.setItem('attendance', JSON.stringify(allAttendance));
      alert('âœ… Attendance saved!');
    });
  }
});

</body>
</html>
